(()=>{"use strict";const e=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};function t(e){const t=document.createElement("p");return t.textContent=e,t}const n=function(){const n=document.getElementById("main");e(n),n.appendChild(function(){const e=document.createElement("div");return e.classList.add("home"),e.appendChild(t("Play Rock Paper Scissors against an AI that learns as you play!")),e.appendChild(t('Go to the "Play vs Bot" tab to play. The AI improves its predictive model each time you make a selection. Click the "Start Match" button to start a match up to any number of rounds of your choosing.')),e.appendChild(t('You can see the results of the AI training under the "Neural Networks" tab. You can pause/resume/reset the training by pressing the respective buttons.')),e}())};let o={playerScore:0,computerScore:0,matchOngoing:!1,winningScore:null,playerSelection:null,computerSelection:null,roundOutcome:null,matchOutcome:null,scoreboardText:'Click "Start Match" to play up to any number of rounds of your choosing.',inputLayer:[0,0,0,0,0,0,0,0,0]};const c=()=>o,r=e=>{o=e};let i=c(),a=null;const s=function(){for(a=prompt("Play up to how many wins?",5);!(Number.isInteger(Number(a))&&Number(a)>0);)a=prompt("Play up to how many wins? (Please enter a positive integer)",5);i.winningScore=a,i.matchOngoing=!0,i.matchOutcome="ONGOING",i.playerScore=0,i.computerScore=0,i.scoreboardText=`Playing to ${i.winningScore} wins. (Best of ${2*i.winningScore-1})`,r(i),O()};let d=10;function l(){let e=[],t=[];for(let e=0;e<d;e++){let e=[];for(let t=0;t<9;t++)e.push(u(-1,1));t.push(e)}e.push(t);let n=[];for(let e=0;e<d;e++)n.push(u(-1,1));e.push(n);let o=[];for(let e=0;e<d;e++){let e=[];for(let t=0;t<d;t++)e.push(u(-1,1));o.push(e)}e.push(o);let c=[];for(let e=0;e<d;e++)c.push(u(-1,1));e.push(c);let r=[];for(let e=0;e<3;e++){let e=[];for(let t=0;t<d;t++)e.push(u(-1,1));r.push(e)}e.push(r);let i=[];for(let e=0;e<3;e++)i.push(u(-1,1));return e.push(i),e}function u(e,t){return Math.random()*(t-e)+e}function p(e,t){let n=m(e[0],e[1],t);n=n.map((e=>Math.max(0,Math.tanh(e))));let o=m(e[2],e[3],n);o=o.map((e=>Math.max(0,Math.tanh(e))));let c=m(e[4],e[5],o);c=c.map((e=>function(e){return 1/(1+Math.exp(-e))}(e)));let r=c.reduce(((e,t)=>e+t),0);c=c.map((e=>e/r));let i,a=function(e){let t=e[0];for(let n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return t}(c);return c[0]===a?i={memberSelection:"ROCK",rockConfidence:c[0],paperConfidence:c[1],scissorConfidence:c[2]}:c[1]===a?i={memberSelection:"PAPER",rockConfidence:c[0],paperConfidence:c[1],scissorConfidence:c[2]}:c[2]===a&&(i={memberSelection:"SCISSOR",rockConfidence:c[0],paperConfidence:c[1],scissorConfidence:c[2]}),i}function m(e,t,n){let o=t.length,c=n.length,r=[];for(let i=0;i<o;i++){let o=0;for(let t=0;t<c;t++)o+=e[i][t]*n[t];o+=t[i],r.push(o)}return r}let C=c(),h=[];function S(){h=[];for(let e=0;e<100;e++)h.push({brain:l(),score:0,age:0,prediction:null,confidence:null,score1:1/3,score2:1/3,score3:1/3,score4:1/3,score5:1/3,score6:1/3,score7:1/3,score8:1/3,score9:1/3,score10:1/3})}let f={currentlyTraining:!0};function g(){return f}c().inputLayer;let E=c();g();const b=function(e){let t=null;"rock-selection"===e?t="ROCK":"paper-selection"===e?t="PAPER":"scissor-selection"===e&&(t="SCISSOR");let n=function(){let e=0,t=0,n=0,o=0,c=0,r=0;for(let i=0;i<100;i++){let a=p(h[i].brain,C.inputLayer);"ROCK"===a.memberSelection?(h[i].prediction="ROCK",h[i].confidence=a.rockConfidence,e+=1,o+=h[i].score):"PAPER"===a.memberSelection?(h[i].prediction="PAPER",h[i].confidence=a.paperConfidence,t+=1,c+=h[i].score):"SCISSOR"===a.memberSelection&&(h[i].prediction="SCISSOR",h[i].confidence=a.scissorConfidence,n+=1,r+=h[i].score)}return e>t&&e>n?"ROCK":t>e&&t>n?"PAPER":n>e&&n>t?"SCISSOR":o>c&&o>r?"ROCK":c>o&&c>r?"PAPER":r>o&&r>c?"SCISSOR":"ROCK"}();E.playerSelection=t,E.computerSelection=n,t===n?E.roundOutcome="TIE":"ROCK"===t?"PAPER"===n?E.roundOutcome="LOSS":"SCISSOR"===n&&(E.roundOutcome="WIN"):"PAPER"===t?"SCISSOR"===n?E.roundOutcome="LOSS":"ROCK"===n&&(E.roundOutcome="WIN"):"SCISSOR"===t&&("ROCK"===n?E.roundOutcome="LOSS":"PAPER"===n&&(E.roundOutcome="WIN")),!0===E.matchOngoing&&("WIN"===E.roundOutcome?E.playerScore+=1:"LOSS"===E.roundOutcome&&(E.computerScore+=1)),E.playerScore==E.winningScore?(E.matchOngoing=!1,E.matchOutcome="WIN",E.scoreboardText="You won! Final Score:"):E.computerScore==E.winningScore&&(E.matchOngoing=!1,E.matchOutcome="LOSS",E.scoreboardText="You lost! Final Score:"),"ROCK"===t?"ROCK"===n?E.inputLayer=[1,0,0,0,0,0,0,0,0]:"PAPER"===n?E.inputLayer=[0,1,0,0,0,0,0,0,0]:"SCISSOR"===n&&(E.inputLayer=[0,0,1,0,0,0,0,0,0]):"PAPER"===t?"ROCK"===n?E.inputLayer=[0,0,0,1,0,0,0,0,0]:"PAPER"===n?E.inputLayer=[0,0,0,0,1,0,0,0,0]:"SCISSOR"===n&&(E.inputLayer=[0,0,0,0,0,1,0,0,0]):"SCISSOR"===t&&("ROCK"===n?E.inputLayer=[0,0,0,0,0,0,1,0,0]:"PAPER"===n?E.inputLayer=[0,0,0,0,0,0,0,1,0]:"SCISSOR"===n&&(E.inputLayer=[0,0,0,0,0,0,0,0,1])),r(E),O()};let L=c();const O=function(){const t=document.getElementById("main");e(t),t.appendChild(function(){const e=document.createElement("div");e.classList.add("play");const t=function(){const e=document.createElement("div");e.classList.add("container"),e.setAttribute("id","scoreboard");const t=document.createElement("div");t.classList.add("container"),t.setAttribute("id","scores");const n=document.createElement("div");n.classList.add("scores"),n.textContent=`Player: ${L.playerScore}`;const o=document.createElement("div");o.classList.add("scores"),o.textContent=`Computer: ${L.computerScore}`,t.appendChild(n),t.appendChild(o);const c=function(){const e=document.createElement("div");return e.setAttribute("id","scoreboard-text"),e.textContent=L.scoreboardText,e}();return e.appendChild(c),e.appendChild(t),e}(),n=function(){const e=document.createElement("div");e.classList.add("selection-area");const t=document.createElement("input");t.classList.add("selection-input"),t.setAttribute("id","rock-selection"),t.type="image",t.src="images/rockb.jpg",t.alt="Rock",t.draggable=!1,t.addEventListener("click",(e=>{b(e.target.id)}));const n=document.createElement("input");n.classList.add("selection-input"),n.setAttribute("id","paper-selection"),n.type="image",n.src="images/paperb.jpg",n.alt="Paper",n.draggable=!1,n.addEventListener("click",(e=>{b(e.target.id)}));const o=document.createElement("input");return o.classList.add("selection-input"),o.setAttribute("id","scissor-selection"),o.type="image",o.src="images/scissorb.jpg",o.alt="Scissor",o.draggable=!1,o.addEventListener("click",(e=>{b(e.target.id)})),e.appendChild(t),e.appendChild(n),e.appendChild(o),e}(),o=function(){const e=document.createElement("div");e.classList.add("results-area");const t=document.createElement("img");t.classList.add("selection-input"),t.draggable=!1;const n=document.createElement("img");n.classList.add("selection-input"),n.draggable=!1;const o=document.createElement("div");o.classList.add("result-text");const c=document.createElement("div");c.classList.add("result-selection-area");const r=document.createElement("div");r.classList.add("result-selection-area");const i=document.createElement("p");i.classList.add("selection-text"),i.textContent="You played:";const a=document.createElement("p");return a.classList.add("selection-text"),a.textContent="Computer played:",c.appendChild(i),c.appendChild(t),r.appendChild(a),r.appendChild(n),null===L.roundOutcome||("ROCK"===L.playerSelection?t.src="images/rockb.jpg":"PAPER"===L.playerSelection?t.src="images/paperb.jpg":"SCISSOR"===L.playerSelection&&(t.src="images/scissorb.jpg"),"ROCK"===L.computerSelection?n.src="images/rocka.jpg":"PAPER"===L.computerSelection?n.src="images/papera.jpg":"SCISSOR"===L.computerSelection&&(n.src="images/scissora.jpg"),"TIE"===L.roundOutcome?o.textContent="Tie!":"WIN"===L.roundOutcome?o.textContent="You won!":"LOSS"===L.roundOutcome&&(o.textContent="You lost!"),e.appendChild(c),e.appendChild(o),e.appendChild(r)),e}(),c=function(){const e=document.createElement("button");return e.classList.add("menu-button"),e.setAttribute("id","start-match"),e.textContent="Start Match",e.id="start-match-button",e.addEventListener("click",s),e}();return e.appendChild(t),e.appendChild(n),e.appendChild(o),e.appendChild(c),e}())};let y=g();function R(e){const t=document.createElement("div");t.classList.add("member-area"),t.id=`member-${e+1}`,t.textContent=`${e+1}`;const n=document.createElement("div");return n.classList.add("member-info"),n.appendChild(v(`Ranking: ${e+1}`)),n.appendChild(v(`Score: ${h[e].score}`)),n.appendChild(v(`Age: ${h[e].age}`)),n.appendChild(v(`Prediction: ${h[e].prediction}`)),n.appendChild(v(`Confidence: ${h[e].confidence}`)),t.appendChild(n),t}function v(e){const t=document.createElement("div");return t.textContent=e,t}function P(){const t=document.getElementById("main");e(t),t.appendChild(function(){const e=document.createElement("div");e.classList.add("training");const t=function(){const e=document.createElement("div");e.classList.add("population-area");for(let t=0;t<100;t++)e.appendChild(R(t));return e}(),n=function(){const e=document.createElement("div");return e.classList.add("button-area"),e.appendChild(function(){const e=document.createElement("button");return e.classList.add("menu-button"),e.textContent="Reset Training",e.addEventListener("click",(()=>{S(),P()})),e}()),e.appendChild(function(){const e=document.createElement("button");return e.classList.add("menu-button"),!0===y.currentlyTraining?e.textContent="Pause Training":e.textContent="Resume Training",e.addEventListener("click",(()=>{!0===y.currentlyTraining?y.currentlyTraining=!1:y.currentlyTraining=!0,function(e){f=e}(y),P()})),e}()),e}();return e.appendChild(t),e.appendChild(n),e}())}const x=P;function I(e){document.querySelectorAll(".button-nav").forEach((e=>{e!==this&&e.classList.remove("active")})),e.classList.add("active")}!function(){const e=document.getElementById("content");e.appendChild(function(){const e=document.createElement("header");e.classList.add("header");const t=document.createElement("h1");return t.textContent="Rock Paper Scissors",e.appendChild(t),e.appendChild(function(){const e=document.createElement("nav"),t=document.createElement("button");t.classList.add("button-nav"),t.textContent="Information",t.addEventListener("click",(e=>{e.target.classList.contains("active")||(I(t),n())}));const o=document.createElement("button");o.classList.add("button-nav"),o.textContent="Play vs Bot",o.addEventListener("click",(e=>{e.target.classList.contains("active")||(I(o),O())}));const c=document.createElement("button");return c.classList.add("button-nav"),c.textContent="Neural Networks",c.addEventListener("click",(e=>{e.target.classList.contains("active")||(I(c),x())})),e.appendChild(t),e.appendChild(o),e.appendChild(c),e}()),e}()),e.appendChild(function(){const e=document.createElement("main");return e.classList.add("main"),e.setAttribute("id","main"),e}()),e.appendChild(function(){const e=document.createElement("footer");e.classList.add("footer");const t=document.createElement("div");t.textContent="Made by ";const n=document.createElement("a");return n.href="https://github.com/nuyhkusnoom",n.textContent="nuyhkusnoom",t.appendChild(n),e.appendChild(t),e}()),I(document.querySelector(".button-nav")),n(),S()}()})();